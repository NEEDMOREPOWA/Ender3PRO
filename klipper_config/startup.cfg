[gcode_macro STARTUP]
gcode:
    SET_LED LED=LED RED=0.0 GREEN=0.0 BLUE=1.0  # Start with blue
    G28  # Home all axes

   # Gradual transition from blue to white
    SET_LED LED=LED RED=0.2 GREEN=0.2 BLUE=1.0
    G4 P300
    SET_LED LED=LED RED=0.4 GREEN=0.4 BLUE=1.0
    G4 P300
    SET_LED LED=LED RED=0.6 GREEN=0.6 BLUE=1.0
    G4 P300
    SET_LED LED=LED RED=0.8 GREEN=0.8 BLUE=1.0
    G4 P300
    SET_LED LED=LED RED=1.0 GREEN=1.0 BLUE=1.0  # Fully white (homing complete)

    # Flashing effect to confirm homing
    G4 P500
    SET_LED LED=LED RED=0.0 GREEN=0.0 BLUE=0.0  # LEDs off
    G4 P250
    SET_LED LED=LED RED=1.0 GREEN=1.0 BLUE=1.0  # White
    G4 P250
    SET_LED LED=LED RED=0.0 GREEN=0.0 BLUE=0.0  # LEDs off
    G4 P250
    SET_LED LED=LED RED=1.0 GREEN=1.0 BLUE=1.0  # Back to white

    IDLE_FADE_EFFECT
    UPDATE_DELAYED_GCODE ID=idle_check_timer DURATION=30  # Start idle loop